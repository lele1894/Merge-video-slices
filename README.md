# 视频场景分割工具

一个基于 Python 的视频场景分割工具，可以自动检测和分割视频中的场景，支持随机合并和音频处理。使用 FFmpeg 进行视频处理，不重新编码以保持原始视频质量。

## 主要功能

- 自动检测视频场景变化点
- 按场景智能分割视频
- 可选保留或去除音频
- 支持随机合并分割片段
- 智能缓存场景检测数据
- 简洁的图形用户界面
- 无损分割，保持原始质量
- 支持跳帧加速检测

## 使用场景

- 视频素材分段处理
- 自动剪辑长视频
- 视频内容分析
- 视频素材管理

## 系统要求

- Python 3.6 或更高版本
- FFmpeg（需安装并添加到系统环境变量）
- 依赖包：
  - ffmpeg-python >= 0.2.0
  - scenedetect[opencv] >= 0.6.1

## 下载和安装

提供两个版本的可执行文件：

### 1. 含 FFmpeg 版本（推荐）
- 下载 `视频场景分割工具_含FFmpeg.exe`
- 直接运行即可，无需额外安装
- 文件较大（约100MB）但使用方便

### 2. 不含 FFmpeg 版本
- 下载 `视频场景分割工具_需要FFmpeg.exe`
- 需要自行安装 FFmpeg 并添加到环境变量：
  1. 下载 FFmpeg: https://ffmpeg.org/download.html
  2. 解压到任意目录
  3. 将 FFmpeg 的 bin 目录添加到系统环境变量
  4. 重启电脑使环境变量生效
- 文件较小（约20MB）但需要配置

### 从源码运行

如果你有 Python 环境，也可以直接运行源码：

1. 安装 Python 依赖：
```bash
pip install -r requirements.txt
```

2. 安装 FFmpeg（如上述方法）

3. 运行程序：
```bash
python 视频切片合并.py
```

## 版本选择建议

1. 普通用户：
   - 推荐下载"含 FFmpeg 版本"
   - 无需配置，解压即用
   - 适合不熟悉环境配置的用户

2. 专业用户：
   - 可以选择"不含 FFmpeg 版本"
   - 如果已经安装了 FFmpeg
   - 想要更小的程序体积

3. 开发者：
   - 建议直接使用源码
   - 可以自定义修改功能
   - 需要 Python 环境

## 输出文件说明

程序会在原视频所在目录生成以下文件：

- 场景片段：`视频名称_阈值/output_XXX.mp4`
- 随机合并（带音频）：`视频名称.mp4_random_with_audio.mp4`
- 随机合并（无音频）：`视频名称.mp4_random_no_audio.mp4`
- 提取的音频：`视频名称.mp4_original_audio.aac`
- 检测数据缓存：`.scene_cache/[视频MD5]_[阈值].json`

## 性能优化

- 使用跳帧技术加速场景检测
- 智能缓存检测结果避免重复处理
- 多线程处理防止界面卡死
- 直接复制视频流不重新编码

## 注意事项

1. 确保有足够的磁盘空间（至少原视频大小的2倍）
2. 首次处理大文件时可能较慢
3. 建议先用小视频测试调整阈值
4. 缓存文件保存30天后自动失效

## 常见问题

Q: 为什么选择视频后没反应？
A: 检查 FFmpeg 是否正确安装并添加到环境变量

Q: 分割出来的片段太多/太少？
A: 调整检测阈值，值越大分割越少

Q: 处理大视频很慢？
A: 这是正常的，建议先用小视频测试参数

## 技术实现

- 使用 scenedetect 进行场景检测
- 使用 FFmpeg 进行视频处理
- 使用 tkinter 构建图形界面
- 使用 JSON 存储检测数据
- 使用 MD5 建立缓存索引

## 开发计划

- [ ] 添加进度条显示
- [ ] 支持更多视频格式
- [ ] ���加预览功能
- [ ] 批量处理功能
- [ ] 自定义输出目录

## 许可证

MIT License

## 贡献指南

欢迎提交 Issue 和 Pull Request！

## 更新日志

### v1.0.0 (2024-01)
- 实现基本场景分割功能
- 添加音频处理支持
- 添加随机合并功能
- 添加检测数据缓存
- 优化处理性能
```

这个版本的 README.md：
1. 更详细地说明了功能和使用方法
2. 添加了性能优化和技术实现部分
3. 增加了常见问题解答
4. 提供了更清晰的输出文件说明
5. 添加了开发计划和更新日志
6. 保持了简洁清晰的格式

以上由"Cursor"生成